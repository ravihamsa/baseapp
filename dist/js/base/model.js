define([],function(){var e=Backbone.Model.extend({constructor:function(e,t){var n=this;t&&t.defaults&&(n.defaults=t.defaults),t||(n.options={}),Backbone.Model.apply(n,arguments)},is:function(e){return this.get(e)===!0},isNot:function(e){return this.get(e)===!1},isEqual:function(e,t){return this.get(e)===t},isNotEqual:function(e,t){return this.get(e)!==t},removeSelf:function(){this.collection&&this.collection.remove(this)},insertAfter:function(e){var t=this.collection,n=t.indexOf(this);return t.add(e,{at:n+1}),t.at(n+1)},isDefault:function(e,t){return this.defaults[e]===t},setDefault:function(e,t){this.defaults[e]=t},next:function(){var e=this.collection;if(!e)return;var t=e.indexOf(this);if(t===e.length-1)return;return e.at(t+1)},index:function(){var e=this.collection;return e?e.indexOf(this):0},moveUp:function(){var e=this.collection;if(!e)return;var t=e.indexOf(this);if(t===0)return;this.removeSelf(),e.add(this,{at:t-1})},moveDown:function(){var e=this.collection;if(!e)return;var t=e.indexOf(this);if(t===e.length-1)return;this.removeSelf(),e.add(this,{at:t+1})},getClosest:function(){var e=this.collection;if(!e||e.length<2)return;var t=e.indexOf(this),n=e.at(t-1);return n?n:e.at(t+1)},toJSON:function(e){var t=_.clone(this.attributes);return e&&_.each(t,function(e,n){e.toJSON&&(t[n]=e.toJSON())}),t},serializeForSave:function(){var e=_.clone(this.attributes);return clearTMPIds(e)},checkFilters:function(e){if(e.length===0)return!0;var n=this,r=n.toJSON(),i=_.every(e,function(e){return t[e.expr].call(n,e,r[e.column])});return i},getOption:function(e){return this.options[e]||this[e]},reset:function(e,t,n){var r,i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,u=n.silent,o=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=_.clone(this.attributes),this.changed={}),l=this.attributes,f=this._previousAttributes,c=_.omit(this._previousAttributes,_.keys(i)),this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in c)t=i[r],_.isEqual(l[r],t)||o.push(r),_.isEqual(f[r],t)?delete this.changed[r]:this.changed[r]=t,delete l[r];for(r in i)t=i[r],_.isEqual(l[r],t)||o.push(r),_.isEqual(f[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete l[r]:l[r]=t;if(!u){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,l[o[h]],n)}if(a)return this;if(!u)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this}}),t={eq:function(e,t){return e.value===t},startsWith:function(e,t){return(new RegExp("^"+e.value,"i")).test(t)},endsWith:function(e,t){return(new RegExp(e.value+"$","i")).test(t)},has:function(e,t){return(new RegExp(e.value,"i")).test(t)}};return e});