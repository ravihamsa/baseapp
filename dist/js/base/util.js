define([],function(){function i(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(null,arguments)}}var e=function(e){if(!e)return{};var t=_.map(e.split(";"),function(e){return e.split("=")}),n={};return _.each(t,function(e){n[e[0]]=e[1]}),n},t=function(e){var t=[];return _.each(e,function(e,n){t.push(n+"="+e)}),t.join(";")},n=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},r=function(e,t){if(e.map)return e.map(t);var r=[];return n(e,function(e,n,i){r.push(t(e,n,i))}),r},s;return typeof setImmediate=="function"?s=function(e){setImmediate(e)}:s=function(e){setTimeout(e,0)},{paramsToObject:e,objectToParams:t,createView:function(e){var t,n="model",r=e.parentView;if(e.collection||e.Collection)n="collection";n==="model"?e.Model&&(e.model=new e.Model(e.attributes)):e.Collection&&(e.collection=new e.Collection(e.items));var i=_.omit(e,"Collection","Model","parentEl","skipRender","parentView");return t=new e.View(i),t&&(e.skipRender||t.render(),e.parentEl&&(e.replaceHTML&&e.parentEl.empty(),t.$el.appendTo(e.parentEl))),r&&r.addChildView(t),t},aSyncQueue:function(e,t){function r(e,r,i,o){r.constructor!==Array&&(r=[r]),n(r,function(n){var r={data:n,callback:typeof o=="function"?o:null};i?e.tasks.unshift(r):e.tasks.push(r),e.saturated&&e.tasks.length===t&&e.saturated(),s(e.process)})}t===undefined&&(t=1);var o=0,u={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,added:null,push:function(e,t){r(u,e,!1,t),u.added&&u.tasks.length!==0&&u.added()},unshift:function(e,t){r(u,e,!0,t)},process:function(){if(o<u.concurrency&&u.tasks.length){var t=u.tasks.shift();u.empty&&u.tasks.length===0&&u.empty(),o+=1;var n=function(){o-=1,t.callback&&t.callback.apply(t,arguments),u.drain&&u.tasks.length+o===0&&u.drain(),u.process()},r=i(n);e(t.data,r)}},length:function(){return u.tasks.length},running:function(){return o}};return u}}});