define(["base/app","base/model"],function(e,t){var n=Backbone.Collection.extend({constructor:function(e){var t=this;t.options=e||{},Backbone.Collection.call(t,e),_.each(s,function(n){n.call(t,e)})},model:t,getOption:function(e){return this.options[e]||this[e]}}),r=function(){var t=this,n=t.getOption("sortKey")||"name",r=t.getOption("sortOrder")||"asc",i={};t.addFilter=function(t){var n=e.getHash(JSON.stringify(t));console.log(n,t),i[n]=t},t.removeFilter=function(t){var n=e.getHash(t),r=i[n];if(!r)throw new Error("Filter missing");delete i[n]},t.processedEach=function(e,t){var n=this,r=_.values(i);for(var s=0,o=n.length;s<o;s++){var u=n.at(s);console.log("filter satisfied",u.checkFilters(r)),u.checkFilters(r)&&e.call(t||n,u)}}},i=function(){var e=this,t=0},s=[r,i];return n});