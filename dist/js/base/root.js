define(["base/view","base/app","widgets/header"],function(e,t,n){var r,i=function(e,n,i){r&&(console.log("currentPageView removed ",(new Date).toLocaleTimeString()),r.remove()),require(["apps/"+e+"/pages/"+n],function(e){var n=new e.View({model:t.appModel}),i=$(t.appBody);i.empty(),i.html(n.el),n.render(),r=n})},s=e.extend({changeHandler:function(e){var t=this.model.toJSON();e.appId?require(["apps/"+t.appId],function(){require(["apps/"+t.appId+"/app"],function(e){var n=t.pageId||e.defaultPage;i(t.appId,n,t)})}):e.hasOwnProperty("pageId")&&require(["apps/"+t.appId+"/app"],function(e){var n=t.pageId||e.defaultPage;i(t.appId,n,t)})}});return{View:s}});