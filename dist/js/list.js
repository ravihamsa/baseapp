define("list/singleSelect",["base"],function(e){function a(){var e=this,t,n,r=e.get("items");r||(r=new s,e.set("items",r));var i=r.findWhere({selected:!0});i&&(t=i,n=i);var o=function(){e.set("selectedItem",t)};e.getSelected=function(){return t},e.prevSelected=function(){return n},e.setSelectedById=function(e){var i=r.get(e);if(!t){t=i,i.select(),o();return}if(i.id===t.id)return;n=t,t=i,n.deselect(),i.select(),o()},e.setSelected=function(e){if(!t){t=e,e.select(),o();return}if(e.id===t.id)return;n=t,t=e,n.deselect(),e.select(),o()},e.clearSelection=function(){n=t,t=null,n.deselect(),o()},e.selectFirst=function(){e.setSelected(r.first())}}var t=e.util,n=e.View.extend({template:'<div class="list-view"></div>',postRender:function(){var n=this.model.get("items"),r=t.createView({View:e.CollectionView,collection:n,parentEl:this.$(".list-view"),itemView:this.getOption("ItemView")||i})},actionHandler:function(e){this.model.setSelectedById(e)}}),r=e.Model.extend({defaults:{selected:!1},select:function(){this.set("selected",!0)},deselect:function(){this.set("selected",!1)},toggleSelect:function(){var e=this.is("selected");this.set("selected",!e)}}),i=e.View.extend({tagName:"li",className:"single-select-item",template:'<a href="#{{id}}" class="action">{{name}}</a>',changeHandler:function(){this.render(),this.$el.toggleClass("active",this.model.is("selected"))}}),s=e.Collection.extend({model:r}),o=[a],u=e.Model.extend({constructor:function(t){var n=this;e.Model.call(n,t),_.each(o,function(e){e.call(n,t)})}});return{View:n,Model:u,ItemModel:r,ItemView:i,ItemCollection:s}}),define("list/multiSelect",["base","list/singleSelect"],function(e,t){function i(){var e=this,t=[],n=e.get("items");e.getSelected=function(){return t},e.setSelectedById=function(e){var t=n.get(e);t.toggleSelect(),r()},e.setSelected=function(e){e.toggleSelect(),r()},e.selectAll=function(){n.each(function(e){e.select()}),r()},e.selectNone=function(){n.each(function(e){e.deselect()}),r()};var r=function(){t=n.where({selected:!0}),e.set("selectedCount",t.length)};r()}var n=[i],r=e.Model.extend({constructor:function(t){var r=this;e.Model.call(r,t),_.each(n,function(e){e.call(r,t)})}});return{View:t.View,Model:r,ItemView:t.ItemView,ItemCollection:t.ItemCollection}}),define("list",["require","list/singleSelect","list/multiSelect"],function(e){return{SingleSelect:e("list/singleSelect"),MultiSelect:e("list/multiSelect")}});